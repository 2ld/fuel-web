# This file is auto generated by chef
# Do no edit in place
description "Celery job server"
author "Maxim Kulkin <mkulkin@mirantis.com>"
start on runlevel [2345]
stop on runlevel [!2345]
#Send KILL after 20 seconds
kill timeout 20

script
exec su -c "cd <%= @params[:cwd] %>; <%= @params[:command] || 'celeryd-multi' %> start <%= @params[:workers] || 1 %> <%= @celery_options %>" <%= @params[:user] %>
end script

pre-stop script
exec su -c "cd <%= @params[:cwd] %>; <%= @params[:command] || 'celeryd-multi' %> stop <%= @params[:workers] || 1 %> <%= @params[:workers] %> <%= @celery_options %>" <%= @params[:user] %>
end script

respawn
