{
    "name": "OpenStack Essex Release",
    "version": "0.1.0",
    "description": "Alpha release",
    "networks_metadata": [
        {"name": "floating", "access": "public"},
        {"name": "public", "access": "public"},
        {"name": "management", "access": "private10"},
        {"name": "storage", "access": "private172"}
    ],

    "roles": [
	{
	    "name": "infrastructure",
	    "components": [
		"infrastructure"
	    ]
	},
	{
	    "name": "controller",
	    "components": [
		"mysql_server",
		"mysql_client",
		"rabbitmq",
		"keystone",
		"glance",
		"nova",
		"horizon"
	    ]
	},
	{
	    "name": "compute",
	    "components": [
		"mysql_client",
		"nova_compute"
	    ]
	},
	{
	    "name": "controller-compute-both",
	    "components": [
		"mysql_server",
		"mysql_client",
		"rabbitmq",
		"keystone",
		"glance",
		"nova_both",
		"horizon"
	    ]
	}
    ],

    "components": [
	{
	    "name": "infrastructure", 
	    "deploy": {
		"driver": "chef-solo",
		"driver_args": {
		    "run_list": [
			"recipe[network::create_interfaces@0.0.2]",
			"recipe[firewall::disable@0.8.1]",
			"recipe[ntp::default@1.1.2]"
		    ]
		}
	    },
	    "provides": ["infrastructure_endpoint"],
	    "requires": []
	},
	{
	    "name": "mysql_server", 
	    "deploy": {
		"driver": "chef-solo",
		"driver_args": {
		    "run_list": [
			"recipe[mysql::server@0.1.0]"
		    ],
		    "cooks":[
			{"name": "mysql", "version": "0.1.0"},
			{"name": "database", "version": "1.2.0"},
			{"name": "chef-resource-groups", "version": "0.1.0"}
		    ]
		}
	    },
	    "provides": [
		"mysql_server_endpoint", 
		"mysql_db_maker_endpoint", 
		"mysql_keystone_endpoint",
		"mysql_glance_endpoint",
		"mysql_horizon_endpoint",
		"mysql_nova_endpoint"
	    ],
	    "requires": ["infrastructure_endpoint"]
	},
	{
	    "name": "mysql_client", 
	    "deploy": {
		"driver": "chef-solo",
		"driver_args": {
		    "run_list": [
			"recipe[mysql::client@0.1.0]"
		    ],
		    "cooks":[
			{"name": "mysql", "version": "0.1.0"},
			{"name": "database", "version": "1.2.0"},
			{"name": "chef-resource-groups", "version": "0.1.0"}
		    ]
		}
	    },
	    "provides": [],
	    "requires": ["infrastructure_endpoint"]
	},
	{
	    "name": "rabbitmq", 
	    "deploy": {
		"driver": "chef-solo",
		"driver_args": {
		    "run_list": [
			"recipe[rabbitmq::default@0.1.0]"
		    ],
		    "cooks":[
			{"name": "rabbitmq", "version": "0.1.0"},
			{"name": "database", "version": "1.2.0"},
			{"name": "chef-resource-groups", "version": "0.1.0"}
		    ]
		}
	    },
	    "provides": ["rabbitmq_endpoint"],
	    "requires": ["infrastructure_endpoint"]
	},
	{
	    "name": "keystone", 
	    "deploy": {
		"driver": "chef-solo",
		"driver_args": {
		    "run_list": [
			"recipe[keystone::server@0.0.1]"
		    ],
		    "cooks":[
			{"name": "keystone", "version": "0.0.1"},
			{"name": "database", "version": "1.2.0"},
			{"name": "chef-resource-groups", "version": "0.1.0"}
		    ]
		}
	    },
	    "provides": ["keystone_endpoint"],
	    "requires": [
		"infrastructure_endpoint",
		"mysql_server_endpoint", 
		"mysql_db_maker_endpoint",
		"mysql_keystone_endpoint"
	    ]
	},
	{
	    "name": "glance", 
	    "deploy": {
		"driver": "chef-solo",
		"driver_args": {
		    "run_list": [
			"recipe[glance::api@0.0.1]",
			"recipe[glance::registry@0.0.1]"
		    ],
		    "cooks":[
			{"name": "glance", "version": "0.0.1"},
			{"name": "database", "version": "1.2.0"},
			{"name": "chef-resource-groups", "version": "0.1.0"}
		    ]
		}
	    },
	    "provides": ["glance_endpoint"],
	    "requires": [
		"infrastructure_endpoint",
		"mysql_server_endpoint", 
		"mysql_db_maker_endpoint",
		"mysql_glance_endpoint",
		"rabbitmq_endpoint",
		"keystone_endpoint"
	    ]
	},
	{
	    "name": "nova", 
	    "deploy": {
		"driver": "chef-solo",
		"driver_args": {
		    "run_list": [
			"recipe[nova::api@0.0.1]",
			"recipe[nova::scheduler@0.0.1]",
			"recipe[nova::project@0.0.1]",
			"recipe[nova::vncproxy@0.0.1]",
			"recipe[nova::volume@0.0.1]"
		    ],
		    "cooks":[
			{"name": "nova", "version": "0.0.1"},
			{"name": "database", "version": "1.2.0"},
			{"name": "chef-resource-groups", "version": "0.1.0"}
		    ]
		}
	    },
	    "provides": [
		"nova_endpoint",
		"nova_api_endpoint",
		"nova_vnc_endpoint",
		"nova_volume_endpoint"
	    ],
	    "requires": [
		"infrastructure_endpoint",
		"mysql_server_endpoint", 
		"mysql_db_maker_endpoint",
		"mysql_nova_endpoint",
		"keystone_endpoint",
		"rabbitmq_endpoint",
		"glance_endpoint"
	    ]
	},
	{
	    "name": "nova_compute", 
	    "deploy": {
		"driver": "chef-solo",
		"driver_args": {
		    "run_list": [
			"recipe[nova::compute@0.0.1]"
		    ],
		    "cooks":[
			{"name": "nova", "version": "0.0.1"},
			{"name": "database", "version": "1.2.0"},
			{"name": "chef-resource-groups", "version": "0.1.0"}
		    ]
		}
	    },
	    "provides": [
		"nova_endpoint",
		"nova_api_endpoint"
	    ],
	    "requires": [
		"infrastructure_endpoint",
		"mysql_server_endpoint", 
		"mysql_nova_endpoint",
		"keystone_endpoint",
		"rabbitmq_endpoint",
		"glance_endpoint"
	    ]
	},
	{
	    "name": "nova_both", 
	    "deploy": {
		"driver": "chef-solo",
		"driver_args": {
		    "run_list": [
			"recipe[nova::api@0.0.1]",
			"recipe[nova::scheduler@0.0.1]",
			"recipe[nova::project@0.0.1]",
			"recipe[nova::vncproxy@0.0.1]",
			"recipe[nova::volume@0.0.1]",
			"recipe[nova::compute@0.0.1]"
		    ],
		    "cooks":[
			{"name": "nova", "version": "0.0.1"},
			{"name": "database", "version": "1.2.0"},
			{"name": "chef-resource-groups", "version": "0.1.0"}
		    ]
		}
	    },
	    "provides": [
		"nova_endpoint",
		"nova_api_endpoint",
		"nova_vnc_endpoint",
		"nova_volume_endpoint"
	    ],
	    "requires": [
		"infrastructure_endpoint",
		"mysql_server_endpoint", 
		"mysql_db_maker_endpoint",
		"mysql_nova_endpoint",
		"keystone_endpoint",
		"rabbitmq_endpoint",
		"glance_endpoint"
	    ]
	},
	{
	    "name": "horizon", 
	    "deploy": {
		"driver": "chef-solo",
		"driver_args": {
		    "run_list": [
			"recipe[horizon::server@0.0.1]"
		    ],
		    "cooks":[
			{"name": "horizon", "version": "0.0.1"},
			{"name": "database", "version": "1.2.0"},
			{"name": "chef-resource-groups", "version": "0.1.0"}
		    ]
		}
	    },
	    "provides": [
		"horizon_endpoint"
	    ],
	    "requires": [
		"infrastructure_endpoint",
		"mysql_server_endpoint", 
		"mysql_db_maker_endpoint",
		"mysql_horizon_endpoint",
		"keystone_endpoint",
		"glance_endpoint",
		"nova_api_endpoint",
		"nova_volume_endpoint"
	    ]
	}
    ],

    "points": [
	{
	    "name": "infrastructure_endpoint",
	    "scheme": {
		"nailgun_address": {
		    "generator": "generator_ip_repo",
		    "generator_args": "",
		    "attribute": "repo.address"
		},
		"admin_address": {
		    "generator": "generator_ip",
		    "generator_args": "admin",
		    "attribute": "networks.admin.address"
		},
		"admin_netmask": {
		    "generator": "generator_netmask",
		    "generator_args": "admin",
		    "attribute": "networks.admin.netmask"
		},
		"admin_device": {
		    "generator": "generator_transparent",
		    "generator_args": "eth0:0",
		    "attribute": "networks.admin.device"
		},
		"public_address": {
		    "generator": "generator_ip",
		    "generator_args": "public",
		    "attribute": "networks.public.address"
		},
		"public_netmask": {
		    "generator": "generator_netmask",
		    "generator_args": "public",
		    "attribute": "networks.public.netmask"
		},
		"public_device": {
		    "generator": "generator_transparent",
		    "generator_args": "eth0:1",
		    "attribute": "networks.public.device"
		},
		"floating_address": {
		    "generator": "generator_ip",
		    "generator_args": "floating",
		    "attribute": "networks.floating.address"
		},
		"floating_netmask": {
		    "generator": "generator_netmask",
		    "generator_args": "floating",
		    "attribute": "networks.floating.netmask"
		},
		"floating_device": {
		    "generator": "generator_transparent",
		    "generator_args": "eth0:2",
		    "attribute": "networks.floating.device"
		},
		"storage_address": {
		    "generator": "generator_ip",
		    "generator_args": "storage",
		    "attribute": "networks.storage.address"
		},
		"storage_netmask": {
		    "generator": "generator_netmask",
		    "generator_args": "storage",
		    "attribute": "networks.storage.netmask"
		},
		"storage_device": {
		    "generator": "generator_transparent",
		    "generator_args": "eth0:3",
		    "attribute": "networks.storage.device"
		}
	    }
	},
	{
	    "name": "mysql_server_endpoint",
	    "scheme": {
		"host": {
		    "generator": "generator_ip",
		    "generator_args": "admin",
		    "attribute": ["mysql.host", "mysql.admin.host"]
		},
		"port": {
		    "generator": "generator_transparent",
		    "generator_args": 3306,
		    "attribute": ["mysql.port", "mysql.admin.port"]
		},
		"url": {
		    "generator": "generator_url",
		    "generator_args": {
			"protocol": "mysql",
			"network": "admin",
			"port": "3306"
		    },
		    "attribute": "mysql.url"
		}
	    }
	},
	{
	    "name": "mysql_db_maker_endpoint",
	    "scheme": {
		"username": {
		    "generator": "generator_transparent",
		    "generator_args": "db_maker",
		    "attribute": ["mysql.username", "mysql.admin.username"]
		},
		"password": {
		    "generator": "generator_password",
		    "generator_args": "8",
		    "attribute": [
			"mysql.password",
			"mysql.admin.password",
			"mysql.db_maker_password"
		    ]
		}
	    }
	},
	{
	    "name": "mysql_keystone_endpoint",
	    "scheme": {
		"password": {
		    "generator": "generator_password",
		    "generator_args": "8",
		    "attribute": "keystone.db.password"
		}
	    }
	},
	{
	    "name": "mysql_nova_endpoint",
	    "scheme": {
		"password": {
		    "generator": "generator_password",
		    "generator_args": "8",
		    "attribute": "nova.db.password"
		}

	    }
	},
	{
	    "name": "mysql_horizon_endpoint",
	    "scheme": {
		"password": {
		    "generator": "generator_password",
		    "generator_args": "8",
		    "attribute": "horizon.db.password"
		},
		"dbname": {
		    "generator": "generator_transparent",
		    "generator_args": "horizon",
		    "attribute": "horizon.db.name"
		},
		"username": {
		    "generator": "generator_transparent",
		    "generator_args": "horizon",
		    "attribute": "horizon.db.username"
		}
	    }
	},
	{
	    "name": "mysql_glance_endpoint",
	    "scheme": {
		"password": {
		    "generator": "generator_password",
		    "generator_args": "8",
		    "attribute": "glance.db.password"
		}

	    }
	},
	{
	    "name": "rabbitmq_endpoint",
	    "scheme": {
		"host": {
		    "generator": "generator_ip",
		    "generator_args": "admin",
		    "attribute": [
			"rabbitmq.admin.host",
			"rabbitmq.host"
			]
		},
		"port": {
		    "generator": "generator_transparent",
		    "generator_args": "5672",
		    "attribute": [
			"rabbitmq.admin.port",
			"rabbitmq.port"
			]
		},
		"user": {
		    "generator": "generator_transparent",
		    "generator_args": "guest",
		    "attribute": "nova.rabbitmq.password"
		}
	    }
	},
	{
	    "name": "keystone_endpoint",
	    "scheme": {
		"admin_tenant": {
		    "generator": "generator_transparent",
		    "generator_args": "admin",
		    "attribute": "keystone.admin_tenant"
		},
		"admin_user": {
		    "generator": "generator_transparent",
		    "generator_args": "admin",
		    "attribute": "keystone.admin_user"
		},
		"admin_password": {
		    "generator": "generator_password",
		    "generator_args": "8",
		    "attribute": "keystone.admin_password"
		},
		"admin_role": {
		    "generator": "generator_transparent",
		    "generator_args": "admin",
		    "attribute": "keystone.admin_role"
		},
		"admin_token": {
		    "generator": "generator_password",
		    "generator_args": "8",
		    "attribute": "keystone.admin_token"
		},
		"service_tenant": {
		    "generator": "generator_transparent",
		    "generator_args": "service",
		    "attribute": "keystone.admin_token"
		},
		"glance_user": {
		    "generator": "generator_transparent",
		    "generator_args": "glance",
		    "attribute": "glance.keystone.service_user"
		},
		"glance_password": {
		    "generator": "generator_password",
		    "generator_args": "8",
		    "attribute": "glance.keystone.service_password"
		},
		"horizon_user": {
		    "generator": "generator_transparent",
		    "generator_args": "horizon",
		    "attribute": "horizon.keystone.service_user"
		},
		"horizon_password": {
		    "generator": "generator_password",
		    "generator_args": "8",
		    "attribute": "horizon.keystone.service_password"
		},
		"nova_user": {
		    "generator": "generator_transparent",
		    "generator_args": "nova",
		    "attribute": "nova.keystone.service_user"
		},
		"nova_password": {
		    "generator": "generator_password",
		    "generator_args": "8",
		    "attribute": "nova.keystone.service_password"
		},
		"volume_user": {
		    "generator": "generator_transparent",
		    "generator_args": "volume",
		    "attribute": "volume.keystone.service_user"
		},
		"volume_password": {
		    "generator": "generator_password",
		    "generator_args": "8",
		    "attribute": "volume.keystone.service_password"
		},
		"admin_host": {
		    "generator": "generator_ip",
		    "generator_args": "admin",
		    "attribute": "keystone.admin.host" 
		},
		"public_host": {
		    "generator": "generator_ip",
		    "generator_args": "public",
		    "attribute": "keystone.public.host" 
		},
		"admin_port": {
		    "generator": "generator_transparent",
		    "generator_args": "35357",
		    "attribute": [
			"keystone.admin.admin_port", 
			"keystone.public.admin_port"
		    ]
		},
		"service_port": {
		    "generator": "generator_transparent",
		    "generator_args": "5000",
		    "attribute": [
			"keystone.admin.service_port", 
			"keystone.public.service_port"
		    ]
		},
		"admin_url": {
		    "generator": "generator_url",
		    "generator_args": {
			"protocol": "http",
			"network": "admin",
			"port": "35357"
		    },
		    "attribute": "keystone.admin_url"
		},
		"public_url": {
		    "generator": "generator_url",
		    "generator_args": {
			"protocol": "http",
			"network": "public",
			"port": "5000"
		    },
		    "attribute": "keystone.public_url"
		},
		"internal_url": {
		    "generator": "generator_url",
		    "generator_args": {
			"protocol": "http",
			"network": "admin",
			"port": "5000"
		    },
		    "attribute": "keystone.internal_url"
		}
	    }
	},
	{
	    "name": "glance_endpoint",
	    "scheme": {
		"admin_host": {
		    "generator": "generator_ip",
		    "generator_args": "admin",
		    "attribute": [
			"glance.api.admin.host",
			"glance.registry.admin.host",
			"glance.registry.bindhost"
		    ]
		},
		"public_host": {
		    "generator": "generator_ip",
		    "generator_args": "public",
		    "attribute": [
			"glance.api.public.host",
			"glance.registry.public.host"
		    ]
		},
		"api_port": {
		    "generator": "generator_transparent",
		    "generator_args": "9292",
		    "attribute": [
			"glance.api.admin.port",
			"glance.api.public.port"
		    ]
		},
		"registry_port": {
		    "generator": "generator_transparent",
		    "generator_args": "9191",
		    "attribute": [
			"glance.registry.admin.port",
			"glance.registry.public.port"
		    ]
		},
		"api_public_url": {
		    "generator": "generator_url",
		    "generator_args": {
			"protocol": "http",
			"network": "public",
			"port": "9292"
		    },
		    "attribute": "glance.api.public.url"
		},
		"api_admin_url": {
		    "generator": "generator_url",
		    "generator_args": {
			"protocol": "http",
			"network": "admin",
			"port": "9292"
		    },
		    "attribute": "glance.api.admin.url"
		},
		"registry_public_url": {
		    "generator": "generator_url",
		    "generator_args": {
			"protocol": "http",
			"network": "public",
			"port": "9191"
		    },
		    "attribute": "glance.registry.public.url"
		},
		"registry_admin_url": {
		    "generator": "generator_url",
		    "generator_args": {
			"protocol": "http",
			"network": "admin",
			"port": "9191"
		    },
		    "attribute": "glance.registry.admin.url"
		}
	    }
	},
	{
	    "name": "nova_api_endpoint",
	    "scheme": {
		"admin_host": {
		    "generator": "generator_ip",
		    "generator_args": "admin",
		    "attribute": "nova_api.admin.host"
		},
		"public_host": {
		    "generator": "generator_ip",
		    "generator_args": "public",
		    "attribute": "nova_api.public.host"
		}
	    }
	},
	{
	    "name": "nova_vnc_endpoint",
	    "scheme": {
		"admin_host": {
		    "generator": "generator_ip",
		    "generator_args": "admin",
		    "attribute": "nova_vnc.admin.host"
		},
		"public_host": {
		    "generator": "generator_ip",
		    "generator_args": "public",
		    "attribute": "nova_vnc.public.host"
		}
	    }
	},
	{
	    "name": "nova_volume_endpoint",
	    "scheme": {
		"admin_host": {
		    "generator": "generator_ip",
		    "generator_args": "admin",
		    "attribute": "volume.admin.host"
		},
		"public_host": {
		    "generator": "generator_ip",
		    "generator_args": "public",
		    "attribute": "volume.public.host"
		}
	    }
	},
	{
	    "name": "nova_endpoint",
	    "scheme": {
		"admin_host": {
		    "generator": "generator_ip",
		    "generator_args": "admin",
		    "attribute": "nova.admin.host"
		},
		"public_host": {
		    "generator": "generator_ip",
		    "generator_args": "public",
		    "attribute": "nova.public.host"
		},
		"fixed_range": {
		    "generator": "generator_transparent",
		    "generator_args": "10.0.6.0/24",
		    "attribute": "nova.network.fixed_range"
		},
		"floating_range": {
		    "generator": "generator_transparent",
		    "generator_args": "192.168.101.0/24",
		    "attribute": "nova.network.floating_range"
		},
		"public_interface": {
		    "generator": "generator_transparent",
		    "generator_args": "eth0",
		    "attribute": "nova.network.public_interface"
		},
		"vlan_interface": {
		    "generator": "generator_transparent",
		    "generator_args": "eth1",
		    "attribute": "nova.network.vlan_interface"
		},
		"vlan": {
		    "generator": "generator_transparent",
		    "generator_args": "106",
		    "attribute": "nova.network.vlan"
		},
		"ha_enabled": {
		    "generator": "generator_transparent",
		    "generator_args": "true",
		    "attribute": "nova.network.ha_enabled"
		}
	    }
	},
	{
	    "name": "horizon_endpoint",
	    "scheme": {
		"admin_host": {
		    "generator": "generator_ip",
		    "generator_args": "admin",
		    "attribute": "horizon.admin.host"
		}
	    }
	}

    ]
}